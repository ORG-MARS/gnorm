// Package pg contains the types for schema 'information_schema'.
package pg

// GENERATED BY XO. DO NOT EDIT.

import (
	"github.com/pkg/errors"
)

// RoleRoutineGrantTable is the database name for the table.
const RoleRoutineGrantTable = "information_schema.role_routine_grants"

// RoleRoutineGrant represents a row from 'information_schema.role_routine_grants'.
type RoleRoutineGrant struct {
	Grantor         SQLIdentifier `json:"grantor"`          // grantor
	Grantee         SQLIdentifier `json:"grantee"`          // grantee
	SpecificCatalog SQLIdentifier `json:"specific_catalog"` // specific_catalog
	SpecificSchema  SQLIdentifier `json:"specific_schema"`  // specific_schema
	SpecificName    SQLIdentifier `json:"specific_name"`    // specific_name
	RoutineCatalog  SQLIdentifier `json:"routine_catalog"`  // routine_catalog
	RoutineSchema   SQLIdentifier `json:"routine_schema"`   // routine_schema
	RoutineName     SQLIdentifier `json:"routine_name"`     // routine_name
	PrivilegeType   CharacterData `json:"privilege_type"`   // privilege_type
	IsGrantable     YesOrNo       `json:"is_grantable"`     // is_grantable
}

// Constants defining each column in the table.
const (
	RoleRoutineGrantGrantorField         = "grantor"
	RoleRoutineGrantGranteeField         = "grantee"
	RoleRoutineGrantSpecificCatalogField = "specific_catalog"
	RoleRoutineGrantSpecificSchemaField  = "specific_schema"
	RoleRoutineGrantSpecificNameField    = "specific_name"
	RoleRoutineGrantRoutineCatalogField  = "routine_catalog"
	RoleRoutineGrantRoutineSchemaField   = "routine_schema"
	RoleRoutineGrantRoutineNameField     = "routine_name"
	RoleRoutineGrantPrivilegeTypeField   = "privilege_type"
	RoleRoutineGrantIsGrantableField     = "is_grantable"
)

// WhereClauses for every type in RoleRoutineGrant.
var (
	RoleRoutineGrantGrantorWhere         SQLIdentifierField = "grantor"
	RoleRoutineGrantGranteeWhere         SQLIdentifierField = "grantee"
	RoleRoutineGrantSpecificCatalogWhere SQLIdentifierField = "specific_catalog"
	RoleRoutineGrantSpecificSchemaWhere  SQLIdentifierField = "specific_schema"
	RoleRoutineGrantSpecificNameWhere    SQLIdentifierField = "specific_name"
	RoleRoutineGrantRoutineCatalogWhere  SQLIdentifierField = "routine_catalog"
	RoleRoutineGrantRoutineSchemaWhere   SQLIdentifierField = "routine_schema"
	RoleRoutineGrantRoutineNameWhere     SQLIdentifierField = "routine_name"
	RoleRoutineGrantPrivilegeTypeWhere   CharacterDataField = "privilege_type"
	RoleRoutineGrantIsGrantableWhere     YesOrNoField       = "is_grantable"
)

// QueryOneRoleRoutineGrant retrieves a row from 'information_schema.role_routine_grants' as a RoleRoutineGrant.
func QueryOneRoleRoutineGrant(db XODB, where WhereClause, order OrderBy) (*RoleRoutineGrant, error) {
	const origsqlstr = `SELECT ` +
		`grantor, grantee, specific_catalog, specific_schema, specific_name, routine_catalog, routine_schema, routine_name, privilege_type, is_grantable ` +
		`FROM information_schema.role_routine_grants WHERE (`

	idx := 1
	sqlstr := origsqlstr + where.String(&idx) + ") " + order.String() + " LIMIT 1"

	rrg := &RoleRoutineGrant{}
	err := db.QueryRow(sqlstr, where.Values()...).Scan(&rrg.Grantor, &rrg.Grantee, &rrg.SpecificCatalog, &rrg.SpecificSchema, &rrg.SpecificName, &rrg.RoutineCatalog, &rrg.RoutineSchema, &rrg.RoutineName, &rrg.PrivilegeType, &rrg.IsGrantable)
	if err != nil {
		return nil, errors.WithStack(err)
	}
	return rrg, nil
}

// QueryRoleRoutineGrant retrieves rows from 'information_schema.role_routine_grants' as a slice of RoleRoutineGrant.
func QueryRoleRoutineGrant(db XODB, where WhereClause, order OrderBy) ([]*RoleRoutineGrant, error) {
	const origsqlstr = `SELECT ` +
		`grantor, grantee, specific_catalog, specific_schema, specific_name, routine_catalog, routine_schema, routine_name, privilege_type, is_grantable ` +
		`FROM information_schema.role_routine_grants WHERE (`

	idx := 1
	sqlstr := origsqlstr + where.String(&idx) + ") " + order.String()

	var vals []*RoleRoutineGrant
	q, err := db.Query(sqlstr, where.Values()...)
	if err != nil {
		return nil, errors.WithStack(err)
	}
	for q.Next() {
		rrg := RoleRoutineGrant{}

		err = q.Scan(&rrg.Grantor, &rrg.Grantee, &rrg.SpecificCatalog, &rrg.SpecificSchema, &rrg.SpecificName, &rrg.RoutineCatalog, &rrg.RoutineSchema, &rrg.RoutineName, &rrg.PrivilegeType, &rrg.IsGrantable)
		if err != nil {
			return nil, errors.WithStack(err)
		}

		vals = append(vals, &rrg)
	}
	return vals, nil
}

// AllRoleRoutineGrant retrieves all rows from 'information_schema.role_routine_grants' as a slice of RoleRoutineGrant.
func AllRoleRoutineGrant(db XODB, order OrderBy) ([]*RoleRoutineGrant, error) {
	const origsqlstr = `SELECT ` +
		`grantor, grantee, specific_catalog, specific_schema, specific_name, routine_catalog, routine_schema, routine_name, privilege_type, is_grantable ` +
		`FROM information_schema.role_routine_grants`

	sqlstr := origsqlstr + order.String()

	var vals []*RoleRoutineGrant
	q, err := db.Query(sqlstr)
	if err != nil {
		return nil, errors.WithStack(err)
	}
	for q.Next() {
		rrg := RoleRoutineGrant{}

		err = q.Scan(&rrg.Grantor, &rrg.Grantee, &rrg.SpecificCatalog, &rrg.SpecificSchema, &rrg.SpecificName, &rrg.RoutineCatalog, &rrg.RoutineSchema, &rrg.RoutineName, &rrg.PrivilegeType, &rrg.IsGrantable)
		if err != nil {
			return nil, errors.WithStack(err)
		}

		vals = append(vals, &rrg)
	}
	return vals, nil
}
